# 小易AI助手 PC端客户端

基于 Vue 3 + Ant Design X 开发的智能医疗助手客户端界面。

## 🚨 项目改造状态

> **⚠️ 重要提醒**: 本项目正在进行**大规模架构改造**，将从外部依赖迁移到主项目后端。

### 改造概述
- **当前状态**: 使用外部API服务 (已清理敏感配置)
- **目标状态**: 完全集成到主项目 RuoYi-Vue-Plus 后端
- **改造周期**: 预计 17 个工作日
- **改造文档**: 详见 `docs/frontend-analysis/` 目录

### 主要改造内容
1. **API架构重构** - 统一使用主项目的API规范和Sa-Token认证
2. **AI功能完善** - 新增智能体管理、流式对话、文件上传等完整功能
3. **状态管理优化** - 重构Pinia Store以适配新的认证和权限体系
4. **性能和安全提升** - 代码分割、安全加固、测试覆盖

### 改造进度跟踪
📋 **任务跟踪文档**: `docs/frontend-analysis/task-tracking.md`

| 阶段 | 状态 | 预计时间 |
|------|------|----------|
| 基础架构改造 | ⏳ 待开始 | Day 1-5 |
| 系统模块适配 | ⏳ 待开始 | Day 6-8 |
| AI功能开发 | ⏳ 待开始 | Day 9-14 |
| 集成测试优化 | ⏳ 待开始 | Day 15-17 |

### 开发注意事项
- 🔒 **安全**: 已清理外部服务器配置，请勿提交敏感信息
- 🌿 **分支**: `main` 为稳定基线，开发请使用 `develop` 分支
- 📖 **文档**: 改造过程请及时更新相关文档
- 🧪 **测试**: 每个改造阶段都需要充分的功能验证

## 🚀 技术栈

- **框架**: Vue 3.5.16 (Composition API)
- **UI组件库**: Ant Design Vue 4.2.6 + Ant Design X 1.3.0
- **状态管理**: Pinia 3.0.2
- **路由管理**: Vue Router 4.5.1
- **构建工具**: Vite 6.3.5
- **语言**: TypeScript
- **样式**: CSS3 + 响应式设计
- **Markdown**: markdown-it + highlight.js
- **时间处理**: dayjs

## 📦 项目结构

```
pc_client/
├── public/                 # 静态资源
├── src/
│   ├── components/         # 公共组件
│   ├── views/             # 页面组件
│   │   └── ChatView.vue   # 主聊天界面
│   ├── router/            # 路由配置
│   ├── utils/             # 工具函数
│   ├── styles/            # 全局样式
│   ├── App.vue            # 根组件
│   └── main.ts            # 入口文件
├── index.html             # HTML模板
├── package.json           # 项目配置
├── vite.config.ts         # Vite配置
└── tsconfig.json          # TypeScript配置
```

## 🎨 界面特性

### 聊天界面设计
参考 [Ant Design X 独立式样板间](https://ant-design-x.antgroup.com/docs/playground/independent-cn) 的设计理念：

- **现代化渐变背景**: 使用紫蓝色渐变背景，营造科技感
- **毛玻璃效果**: 顶部标题栏采用半透明毛玻璃效果
- **圆角卡片设计**: 聊天区域采用白色圆角卡片，清晰分层
- **消息气泡**: 用户消息和AI助手消息采用不同样式区分
- **响应式布局**: 适配不同屏幕尺寸

### 功能特点

1. **智能对话**: 
   - 支持文本消息发送和接收
   - 实时的输入状态显示
   - Markdown格式支持
   - 代码高亮显示

2. **用户体验**:
   - 欢迎页面展示功能特性
   - 快捷操作按钮
   - 自动滚动到最新消息
   - 加载状态提示

3. **医疗场景定制**:
   - 医疗咨询功能入口
   - 患者信息查询
   - 药物信息咨询
   - 预约管理功能

## 🛠️ 开发环境

### 环境要求
- Node.js >= 18.0.0
- pnpm >= 8.0.0 (推荐) 或 npm >= 9.0.0

### 安装依赖
```bash
# 使用 pnpm (推荐)
pnpm install

# 或使用 npm
npm install
```

### 开发服务器
```bash
# 启动开发服务器
pnpm dev

# 或
npm run dev
```

项目将在 http://localhost:3000 启动

### 构建生产版本
```bash
# 构建生产版本
pnpm build

# 预览生产版本
pnpm preview
```

## 🔧 配置说明

### 环境变量
在项目根目录创建 `.env` 文件：
```env
VITE_API_BASE_URL=http://localhost:8080/api
VITE_APP_TITLE=小易AI助手
```

### API代理配置
开发环境下，Vite自动代理 `/api/*` 请求到后端服务器 `http://localhost:8080`

## 🎯 核心功能

### 聊天界面 (ChatView.vue)
- **消息管理**: 支持用户和AI助手的消息收发
- **Markdown渲染**: 支持富文本消息格式
- **实时交互**: 模拟API调用和响应
- **快捷操作**: 预设常用医疗咨询选项

### 样式系统
- **全局样式**: 统一的颜色、字体、间距规范
- **组件样式**: 模块化的组件样式设计
- **响应式设计**: 移动端适配
- **暗色模式**: 预留暗色主题支持

## 🎨 设计规范

### 颜色规范
- **主色**: `#667eea` (渐变起点)
- **辅助色**: `#764ba2` (渐变终点)
- **文本色**: `#24292e` (主要文本)
- **次要文本**: `#6a737d`
- **边框色**: `#e1e4e8`

### 布局规范
- **圆角**: 12px (卡片), 18px (消息气泡)
- **间距**: 8px, 12px, 16px, 24px
- **字体**: 系统字体栈
- **阴影**: 统一的卡片阴影效果

## 🔌 API接口

### 消息发送
```typescript
interface ChatMessage {
  id: string
  role: 'user' | 'assistant'
  content: string
  timestamp: Date
  loading?: boolean
}
```

### 快捷功能
- 查询患者信息
- 药物咨询
- 预约挂号
- 清空对话

## 📱 响应式支持

- **桌面端**: >= 1200px
- **平板端**: 768px - 1199px  
- **移动端**: < 768px

## 🚧 待扩展功能

1. **文件上传**: 支持图片、文档上传
2. **语音交互**: 语音输入和语音播放
3. **多会话管理**: 支持多个对话窗口
4. **个性化设置**: 主题切换、字体大小调节
5. **离线缓存**: PWA支持和离线消息缓存

## 📄 许可证

MIT License

## 🌿 Git 工作流 (改造期间)

### 分支策略
```
main                # 稳定基线版本 (改造前的完整功能)
├── develop         # 主开发分支 (改造主线)
├── feature/auth    # 认证模块改造
├── feature/ai      # AI功能开发  
└── hotfix/*        # 紧急修复
```

### 提交规范
```bash
feat: 新增功能
fix: 修复问题
refactor: 重构代码
docs: 文档更新
style: 代码格式
test: 测试相关
chore: 构建/工具
```

### 重要节点
- `v1.0.0-baseline`: 改造前基线版本 (当前)
- `v1.1.0-migration`: API迁移完成
- `v1.2.0-ai`: AI功能集成完成
- `v2.0.0-final`: 完整改造版本

## 📋 版本历史

### v1.0.0-baseline (2025-01-21)
- ✅ 初始版本，基于外部API服务
- ✅ 基础聊天功能完整
- ✅ 安全配置清理完成
- ✅ 项目文档完善

### 改造计划 (2025-01-21 开始)
- 🔄 **阶段一**: 基础架构改造
- 🔄 **阶段二**: 系统模块适配
- 🔄 **阶段三**: AI功能开发
- 🔄 **阶段四**: 集成测试优化

## 🤝 贡献指南

### 改造期间的协作流程
1. **从 develop 分支创建功能分支**
2. **参考 task-tracking.md 选择任务**
3. **开发完成后提交 PR 到 develop**
4. **代码 Review 通过后合并**
5. **更新任务跟踪状态**

### 代码质量要求
- ✅ ESLint 检查通过
- ✅ TypeScript 类型正确
- ✅ 单元测试覆盖核心逻辑
- ✅ 功能测试验证通过

## 📞 技术支持

### 改造期间联系方式
- **项目负责人**: [待填写]
- **技术架构**: [待填写]  
- **问题追踪**: GitHub Issues
- **文档地址**: `docs/frontend-analysis/`

### 常见问题
1. **API代理失效**: 检查 vite.config.js 代理配置
2. **认证失败**: 确认后端服务正常运行
3. **构建失败**: 清除 node_modules 重新安装依赖
